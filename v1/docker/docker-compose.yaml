version: "3.9"

services:
  kicomport:
    build:
      context: ../..
      dockerfile: v1/docker/Dockerfile
    user: "${PUID:-1000}:${PGID:-1000}"
    environment:
      - PYTHONUNBUFFERED=1
      - KICOMPORT_PORT=${KICOMPORT_PORT:-8000}
      - KICOMPORT_CONFIG_PATH=${KICOMPORT_CONFIG_PATH:-/app/config/app_settings.docker.yaml}
    ports:
      - "${HOST_PORT:-27888}:${KICOMPORT_PORT:-8000}"
    volumes:
      - ../../data:/data
      - ../../uploads:/uploads
      - ../config:/app/config
      - ../../kicad:/kicad
    restart: unless-stopped
