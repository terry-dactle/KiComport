# Project Job List / Roadmap

- [x] Fix/Finish Health Tab
- [x] Fix/Finish Config Tab
- [x] Fix/Finish Diagnostics Tab
- [x] Fix/Finish "Ollama test: {"enabled":false,"message":"Ollama disabled in config"}" error when testing ollama
- [x] Have avaliable model options in ollama selectable in the ollama model feild
- [x] Remove line "MD5 deduping: duplicates will point to the original job."
- [x] Add support to drop URL and have it wget the download
- [x] Clean up Current Config (summary) so its pretty
- [x] Remove line " (zip, .kicad_sym, .kicad_mod, .stp/.step/.wrl/.obj):"
- [x] Move Current config (summary) from main page to clean it up
- [x] Load and Show current Kicad schematic, footprint, 3d librarys on main page
- [x] Autoload file when dropped in, no need to press upload, just attempt to load file
- [x] Fix Internal Server Error when uploading file "sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Component(components)]'. Original exception was: Could not determine join condition between parent/child tables on relationship Component.candidates - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table."


- [x] Phase 0 – Reset / skeleton
  - [x] Clean old files, create target directories (`v1/backend`, `v1/frontend`, `v1/docker`, `v1/config`, `v1/docs`, `v1/scripts`)
  - [x] Write README, .gitignore, JOBS, ARCHITECTURE, CONFIG_SCHEMA, QUICK_START docs
- [x] Phase 1 – Config & DB bootstrap
  - [x] FastAPI app scaffold with `/` and `/health`
  - [x] Config model + loader (YAML/JSON) with defaults
  - [x] Config API (`GET/PUT /api/config`) with validation
  - [x] SQLite setup path under `/data` with auto table creation + migration hook
  - [x] Dev seed/init script to ensure dirs/config exist locally
- [x] Phase 2 – Uploads & jobs
  - [x] Job model and basic CRUD/list endpoints
  - [x] Upload endpoint + MD5 dedupe + job creation
  - [x] Upload validation (allowed extensions), graceful errors on bad zips
  - [x] Zip extraction into per-job temp directory
  - [x] Duplicate handling rules (auto-detect by MD5, do not save a new copy; surface link to existing job)
- [x] Phase 3 – Scanning & heuristics
  - [x] Scanner to detect symbols/footprints/3D candidates
  - [x] Metadata extraction (names/descriptions/pad counts)
  - [x] Heuristic scoring per candidate
  - [x] Structured job-level logging during scan (zip errors, parsing issues)
- [x] Phase 4 – Ollama integration
  - [x] Client wrapper with retries/timeouts and graceful fallback when unavailable
  - [x] Prompt/response handling for ai_score; treat AI as advisory-only
  - [x] `/api/ollama/test` endpoint
  - [x] Make Ollama entirely optional; disable feature if reliability is poor in target env
- [ ] Phase 5 – UI (upload & jobs)
  - [x] Dashboard with job list/filter
  - [x] Upload form/page
  - [x] Job detail page with candidates/logs
  - [x] Navigation + empty/error states; expose health and API docs link
- [x] Phase 6 – Selection & import
  - [x] Component grouping and selection storage
  - [x] Import pipeline into global KiCad libs
  - [x] Collisions/merge handling and logging
- [ ] Phase 7 – Settings, diagnostics, retention
  - [x] Settings UI with validation + Ollama test
  - [x] Diagnostics page (config summary/DB stats/versions)
  - [x] Manual cleanup (delete old uploads/extracted data) with retention_days
  - [x] Logging/observability: structured app logs, job log viewer
  - [x] API docs page (link to OpenAPI, short usage notes)
- [x] Phase 8 – Dockerisation
  - [x] Backend Dockerfile
  - [x] docker-compose with volumes and configurable port
- [ ] Phase 9 – Tests & polish
  - [ ] Unit tests (config, MD5, scanning, heuristics)
  - [ ] Integration flow test (upload → import)
  - [ ] UI/UX tidy and doc updates (nav, empty/error states)

## Future ranking improvements (not in v1)
- Package agreement across symbol/footprint/3D naming
- Metadata quality checks beyond basics (datasheet/MPN fields, footprint hygiene)
- User feedback weighting beyond selected_count (e.g., decay/aging)
- AI tie-breaker reasons per candidate with stricter JSON contract and validation
